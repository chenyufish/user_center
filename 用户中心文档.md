# **用户中心**

**简介**

制作一款简单的前后端分离的用户管理网站，能够储存和调用用户的基本信息，也是未来各种网页的基本框架。

# 需求分析

1. 满足用户的注册、登录、注销
2. 前端面向客户，后端面向管理（都要有管理员权限界面，能对用户进行查询更改）
3. 用户检验

# 技术选型

前端：三件套＋React+Ant Design组件库+Umi+Ant Design Pro（现成管理系统）

后端：Java +spring+springmvc+Mybatis-plus+mybatis+springboot+Mysql

spring（依赖注入框架，管理java对象，集成一些其他内容）

mybatis（java操作数据的框架，持久层框架，对jdbc的封装）

springmvc（web框架，提供接口访问，restful接口）

mybatis-plus（对mybatis的增强，不用写sql也能实现增删改查）

springboot（快速启动/快速集成项目，不用管理spring配置）

junit单元测试库

部署；容器或者是平台

# 计划日志

1. 初始化项目
   1. 前端初始化
      1. 初始化项目
      2. 组件引入
      3. 项目瘦身
   2. 后端初始化
      1. 准备环境，包括Mysql数据库和驱动
      2. 引入框架（整合好的）
2. 登录注册、注销
   1. 后端
   2. 前端
   3. 目录规整
   4. 实现基本的数据库操作
      1. 模型user对象，可以使用mybatis-X直接生成
3. 用户管理
   1. 前端
   2. 后端

# 数据库设计

|     字段     |               说明               |   类型   |
| :----------: | :------------------------------: | :------: |
|      id      |         主键用来唯一标识         |  bigint  |
|   username   |               昵称               | varchar  |
| userAccount  |             登录账号             | varchar  |
|  avatarUrl   |               头像               | varchar  |
|    gender    |               性别               | tinyint  |
| userPassword |               密码               | varchar  |
|    phone     |               电话               | varchar  |
|    email     |               邮箱               | varchar  |
|  userStatus  |      用户状态（0表示正常）       |   int    |
|   userRole   | 用户权限（0-普通用户，1-管理员） |   int    |
|  planetCode  |             星球编号             | varchar  |
|  createTime  |     创建时间（数据插入时间）     | datetime |
|  updateTime  |     更新时间（数据更新时间）     |  dateti  |
|   isDelete   |       是否删除（逻辑删除）       | tinyint  |



* TODO 记得做单点登录

# 项目目录规整

* controller包：控制层，请求层；里面一般是用来接收请求，不做任何的数据处理 
* service层：做业务逻辑
* mapper层（DAO层）：专门用于数据库的增删改查
* model层：定义一些数据库的模型，或者是一些封装类
* utils层：用来存放一些工具类，比如加密和日期转换



#  自动生成器的使用

MyBatisX 插件，自动根据数据库生成：

- domain：实体对象
- mapper：操作数据库的对象
- mapper.xml：定义了 mapper 对象和数据库的关联，可以在里面自己写 SQL
- service：包含常用的增删改查
- serviceImpl：具体实现 service



# 注册逻辑设计

1. 用户在前端输入账户和密码、以及校验码（todo）
2. 校验用户的账户、密码、校验密码，是否符合要求
   1. 非空
   2. 账户长度 **不小于** 4 位
   3. 密码就 **不小于** 8 位吧
   4. 账户不能重复
   5. 账户不包含特殊字符
   6. 密码和校验密码相同
3. 对密码进行加密（密码千万不要直接以明文存储到数据库中）
4. 向数据库插入用户数据
